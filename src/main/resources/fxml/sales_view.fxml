<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>

<HBox xmlns:fx="http://javafx.com/fxml" spacing="25" stylesheets="@../css/styles.css" fx:controller="com.smartpos.ui.SalesViewController" style="-fx-background-color: transparent;">
    
    <!-- LEFT: Product Search & Selection -->
    <VBox HBox.hgrow="ALWAYS" spacing="20">
        <VBox spacing="5">
            <Label text="TRANSACTION TERMINAL" style="-fx-text-fill: #00f2fe; -fx-font-size: 11px; -fx-font-weight: 900; -fx-letter-spacing: 3px;"/>
            <Label text="YANGI SAVDO" styleClass="view-title"/>
        </VBox>
        
        <HBox spacing="15" alignment="CENTER_LEFT">
            <TextField fx:id="searchField" promptText="Mahsulot nomi yoki shtrixkodini qidirish..." HBox.hgrow="ALWAYS" style="-fx-padding: 15;"/>
            <Button styleClass="button-secondary">
                <graphic><FontAwesomeIconView glyphName="BARCODE" size="20" style="-fx-fill: white;"/></graphic>
            </Button>
        </HBox>
        
        <VBox VBox.vgrow="ALWAYS" styleClass="glass-pane">
            <TableView fx:id="productTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                <columns>
                    <TableColumn fx:id="colProdName" text="MAHSULOT NOMI" prefWidth="250"/>
                    <TableColumn fx:id="colProdPrice" text="NARX (SO'M)" prefWidth="120"/>
                    <TableColumn fx:id="colProdAction" text="AMAL" prefWidth="100"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>
    </VBox>
    
    <!-- RIGHT: Cart & Checkout -->
    <VBox prefWidth="420" spacing="20" styleClass="glass-pane">
        <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>
        
        <HBox alignment="CENTER_LEFT" spacing="10">
            <FontAwesomeIconView glyphName="SHOPPING_CART" size="20" style="-fx-fill: #00f2fe;"/>
            <Label text="JORIY XARIDLAR" style="-fx-font-size: 18px; -fx-font-weight: 900; -fx-text-fill: white;"/>
        </HBox>
        
        <TableView fx:id="cartTable" VBox.vgrow="ALWAYS" styleClass="table-view">
             <columns>
                <TableColumn fx:id="colCartName" text="ITEM" prefWidth="180"/>
                <TableColumn fx:id="colCartQty" text="QTY" prefWidth="60"/>
                <TableColumn fx:id="colCartTotal" text="TOTAL" prefWidth="100"/>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
        </TableView>
        
        <VBox spacing="12">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="MIJOZ" prefWidth="100" style="-fx-text-fill: #8e8ea0; -fx-font-weight: 700;"/>
                <ComboBox fx:id="customerComboBox" maxWidth="Infinity" HBox.hgrow="ALWAYS" promptText="Mijoz tanlash" style="-fx-background-color: rgba(255,255,255,0.03);"/>
            </HBox>

            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="PROMO" prefWidth="100" style="-fx-text-fill: #8e8ea0; -fx-font-weight: 700;"/>
                <TextField fx:id="promoField" HBox.hgrow="ALWAYS" promptText="Kupon bormi?" style="-fx-padding: 8;"/>
            </HBox>
        </VBox>

        <Separator style="-fx-opacity: 0.1;"/>

        <VBox spacing="10">
            <HBox alignment="CENTER_RIGHT" spacing="15">
                <Label text="ORALIQ JAMI" style="-fx-text-fill: #8e8ea0; -fx-font-weight: 700;"/>
                <Label fx:id="subtotalLabel" text="0.00" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            </HBox>

            <HBox alignment="CENTER_RIGHT" spacing="15">
                <Label text="CHEGIRMA" style="-fx-text-fill: #f5576c; -fx-font-weight: 700;"/>
                <Label fx:id="discountLabel" text="0.00" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #f5576c;"/>
            </HBox>

            <HBox alignment="CENTER_RIGHT" spacing="15" style="-fx-padding: 10 0 0 0;">
                <Label text="JAMI SUMMA" style="-fx-font-size: 16px; -fx-font-weight: 900; -fx-text-fill: white;"/>
                <Label fx:id="totalLabel" text="0.00" style="-fx-font-size: 38px; -fx-font-weight: 900; -fx-text-fill: #00f2fe; -fx-effect: dropshadow(gaussian, rgba(0, 242, 254, 0.4), 10, 0.5, 0, 0);"/>
            </HBox>
        </VBox>

        <Separator style="-fx-opacity: 0.1;"/>

        <VBox spacing="15">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="TO'LOV SUMMASI" style="-fx-text-fill: #8e8ea0; -fx-font-size: 10px; -fx-font-weight: 900;"/>
                    <TextField fx:id="paidAmountField" promptText="0.00" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-padding: 12;"/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="TO'LOV TURI" style="-fx-text-fill: #8e8ea0; -fx-font-size: 10px; -fx-font-weight: 900;"/>
                    <ComboBox fx:id="paymentMethodComboBox" maxWidth="Infinity" promptText="Tanlang" style="-fx-padding: 8;"/>
                </VBox>
            </HBox>

            <HBox alignment="CENTER_RIGHT" spacing="15">
                <Label text="QOLDIQ QARZ" style="-fx-text-fill: #f1c40f; -fx-font-weight: bold;"/>
                <Label fx:id="balanceDueLabel" text="0.00" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #f1c40f;"/>
            </HBox>
            
            <Button text="XARIDNI YAKUNLASH" onAction="#handleCheckout" maxWidth="Infinity" styleClass="button-primary" style="-fx-font-size: 18px; -fx-padding: 18;">
                <graphic><FontAwesomeIconView glyphName="CHECK_CIRCLE" size="20" style="-fx-fill: white;"/></graphic>
            </Button>
        </VBox>
    </VBox>

</HBox>
